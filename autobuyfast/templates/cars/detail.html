{% extends "base.html" %}
{% load static crispy_forms_tags humanize %}

{% block title %}
  {{car.title}} - {{ block.super }}
{% endblock title %}

{% block slider %}
<div class="section-title-page area-bg area-bg_dark area-bg_op_70" style="z-index: -100 !important;">
    <div class="area-bg__inner">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <h1 class="b-title-page bg-primary_a">{{car.title}}</h1>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- end .b-title-page-->
<div class="bg-grey">
    <div class="container">
        <div class="row">
            <div class="col-xs-12">
                <ol class="breadcrumb">
                    <li><a href="{% url 'home' %}"><i class="icon fa fa-home"></i></a>
                    </li>
                    <li><a href="{% url 'cars:list' %}">Showroom</a>
                    </li>
                    <li class="active">{{car.title}}</li>
                </ol>
            </div>
        </div>
    </div>
</div>
<!-- end breadcrumb-->

{% endblock slider %}

{% block content %}
<div class="container">
    <div class="row">
  <div class="col-md-8" style="z-index: 10 !important;">
    <section class="b-car-details">
        <div class="b-car-details__header">
            <h2 class="b-car-details__title">{{car.car_year}}</h2>
            <div class="b-car-details__subtitle">{{car.title}}</div>
            <div class="b-car-details__address"><i class="icon fa fa-map-marker text-primary"></i> {{car.car_dealer_name}}</div>
            <div class="b-car-details__links">
                <a class="b-car-details__link" href="{% url 'cars:list' %}"><i class="icon fa fa-car text-primary"></i> Car Brochure</a>
                {% if request.user.is_authenticated %}
                {% if watched %}
                <a class="b-car-details__link" href="{% url 'cars:watch_remove' car.slug %}"><i class="icon fa fa-floppy-o text-primary"></i> Unwatch Price Change</a>
                {% else %}
                <a class="b-car-details__link" href="{% url 'cars:watch_add' car.slug %}"><i class="icon fa fa-floppy-o text-primary"></i> Watch Price Change</a>
                {% endif %}
                {% endif %}
            </div>
        </div>
        <div class="slider-car-details slider-pro" id="slider-car-details">
            <div class="sp-slides">
                {% if car.image_set %}
                    {% for image in car.image_set.all %}
                    <div class="sp-slide">
                        <img class="sp-image" src="{{image.image.url}}" alt="{{car.title}} image" />
                    </div>
                    {% endfor %}
                {% elif car.car_def_image %}
                <div class="sp-slide">
                    <img class="sp-image" src="{{car.car_def_image}}" alt="{{car.title}} image" />
                </div>
                {% endif %}
            </div>
            <div class="sp-thumbnails">
                {% if car.image_set %}
                    {% for image in car.image_set.all %}
                    <div class="sp-thumbnail">
                        <img class="img-responsive" src="{{image.image.url}}" alt="{{car.title}} image" />
                    </div>
                    {% endfor %}
                {% elif car.car_def_image %}
                {% endif %}
            </div>
        </div>
        <!-- end .b-thumb-slider-->
        <div class="b-car-details__section">
            <h3 class="b-car-details__section-title ui-title-inner">Car Overview</h3>
            <div class="b-car-details__section-subtitle">{{car.title}}.</div>
            <p>{{car.seller_note|safe}}</p>
        </div>
        <ul class="b-car-details__nav nav nav-tabs bg-primary">
            <li class="active"><a href="#specifications" data-toggle="tab">specifications</a>
            </li>
            <li><a href="#details" data-toggle="tab">technical details</a>
            </li>
            <li><a href="#contact" data-toggle="tab">contact</a>
            </li>
        </ul>
        <div class="b-car-details__tabs tab-content">
            <div class="tab-pane active fade in" id="specifications">
                <dl class="list list-mark-5 list_mark-prim list-2-col fancy-description-list">
                    <dt>Exterior Color</dt><dd>{{car.car_ext_color}}</dd>
                    <dt>Interior Color</dt><dd>{{car.car_int_color}}</dd>
                    <dt>Fuel Type</dt><dd>{{car.car_fuel_type}}</dd>
                    <dt>Engine</dt><dd>{{car.car_engine}}</dd>
                    <dt>Drivetrain</dt><dd>{{car.car_drive_train}}</dd>
                </dl>
            </div>
            <div class="tab-pane fade" id="details">
                <dl class="list list-mark-5 list_mark-prim list-2-col fancy-description-list">
                    <dt>VIN</dt><dd>{{car.car_vin}}</dd>
                    <dt>Stock Type</dt><dd>{{car.car_stock}}</dd>
                    <dt>Manufacturing Year</dt><dd>{{car.car_year}}</dd>
                    <dt>Mileage</dt><dd>{{car.car_mileage}} Miles</dd>
                    <dt>Transmission</dt><dd>{{car.car_transmission}}</dd>
                </dl>
            </div>
            <div class="tab-pane fade" id="contact">
                <dl class="list list-mark-5 list_mark-prim list-2-col fancy-description-list">
                    {% if car.car_dealer_name %}
                    <dt>Dealer Name</dt><dd>{{car.car_dealer_name}}</dd>
                    <dt>Dealer Contact</dt><dd><a href="tel://{{car.car_dealer_phone}}">{{car.car_dealer_phone}}</a></dd>
                    <dt>Car External Listing</dt><dd><a href="{{car.car_url}}">External Link</a></dd>
                    <dt>Car History Report</dt><dd><a href="{{car.car_history}}">View Report</a></dd>
                    {% else %}
                    <dt>Dealer Name</dt><dd><a href="{{car.dealer.get_absolute_url}}">{{car.dealer.fullname}}</a></dd>
                    <dt>Dealer Phone</dt><dd><a href="tel://{{car.dealer.phone_no}}">{{car.dealer.phone_no}}</a></dd>
                    <dt>Dealer Name</dt><dd><a href="mailto://{{car.dealer.email}}">{{car.dealer.email}}</a></dd>
                    {% endif %}
                    <dt>Seller Note</dt><dd>{{car.car_seller_note|safe}}</dd>
                </dl>
            </div>
        </div>
    </section>

  </div>

  <div class="col-md-4" style="z-index: 10 !important;">
    <aside class="l-sidebar-2">
        <div class="b-car-info">
            <div class="b-car-info__price">${{car.car_price|intcomma}}{% if car.car_sub_price %}<span class="b-car-info__price-msrp">PROMO ${{car.car_sub_price|intcomma}}</span>{% endif %}
            </div>
            <dl class="b-car-info__desc dl-horizontal bg-grey">
                <dt class="b-car-info__desc-dt">year</dt>
                <dd class="b-car-info__desc-dd">{{car.car_year}}</dd>
                <dt class="b-car-info__desc-dt">MILEAGe</dt>
                <dd class="b-car-info__desc-dd">{{car.car_mileage}} mi</dd>
                <dt class="b-car-info__desc-dt">ENGINE</dt>
                <dd class="b-car-info__desc-dd">{{car.car_engine}}</dd>
                <dt class="b-car-info__desc-dt">TRANSMISSION</dt>
                <dd class="b-car-info__desc-dd">{{car.car_transmission}}</dd>
                <dt class="b-car-info__desc-dt">FUEL</dt>
                <dd class="b-car-info__desc-dd">{{car.car_fuel_type}}</dd>
                <dt class="b-car-info__desc-dt">colors</dt>
                <dd class="b-car-info__desc-dd">{{car.car_ext_color}}, {{car.car_int_color}}</dd>
                <dt class="b-car-info__desc-dt">DRIVE TRAIN</dt>
                <dd class="b-car-info__desc-dd">{{car.car_drive_train}}</dd>
                <dt class="b-car-info__desc-dt">STOCK #</dt>
                <dd class="b-car-info__desc-dd">{{car.car_stock}}</dd>
            </dl>
            <div class="b-car-info__item"><span class="b-car-info__item-name"><i class="icon flaticon-car"></i> Vehicle Demand</span>
                <div class="b-car-info__item-inner"><span class="b-car-info__item-info">HIGH</span>
                </div>
            </div>
            <div class="b-bnr-2">
                <div class="b-bnr-2__icon flaticon-smartphone"></div>
                <div class="b-bnr-2__inner">
                    <div class="b-bnr-2__title">Call Dealer</div>
                    <div class="b-bnr-2__info">{% if car.car_dealer_name %}{{car.car_dealer_phone}}{% else %}{{ car.dealer.phone_no }}{% endif %}</div>
                </div>
            </div>
            <!-- end .b-banner-->
            <form class="b-calculator">
                <div class="b-calculator__header"><i class="icon flaticon-calculator text-primary"></i>
                    <div class="b-calculator__header-inner">
                        <div class="b-calculator__name">Shipping Calculator</div>
                        <div class="b-calculator__info">Calculate The Shipping Financing based on location</div>
                    </div>
                </div>
                <div class="b-calculator__group">
                    <div class="b-calculator__label">VEHICLE PRICE ($)</div>
                    <input class="b-calculator__input form-control" type="text" placeholder="$28.600" />
                </div>
                <div class="b-calculator__group">
                    <div class="b-calculator__label">INTEREST RATE (%)</div>
                    <input class="b-calculator__input form-control" type="text" placeholder="10%" />
                </div>
                <div class="b-calculator__group">
                    <div class="b-calculator__label">period in months</div>
                    <input class="b-calculator__input form-control" type="text" placeholder="15 Months" />
                </div>
                <div class="b-calculator__group">
                    <div class="b-calculator__label">down payment</div>
                    <input class="b-calculator__input form-control" type="text" placeholder="$5,000" />
                </div>
                <button class="btn btn-dark">Cauculate</button>
            </form>
            <!-- end .b-calculator-->
        </div>
    </aside>

  </div>

    <!-- end .b-car-details-->
    <section class="section-default_top">
    <div class="container">
        <div class="row">
            <div class="col-xs-12">
                <h2 class="ui-title-block">Related Cars</h2>
                <div class="ui-decor"></div>
                <div class="related-carousel owl-carousel owl-theme owl-theme_w-btn enable-owl-carousel" data-min768="2" data-min992="3" data-min1200="3" data-margin="30" data-pagination="false" data-navigation="true" data-auto-play="4000" data-stop-on-hover="true">
                    {% for car in car.get_related_cars_by_tags %}
                    <div class="b-goods-feat">
                        {% if car.car_def_image %}
                        <div class="b-goods-feat__img">
                            <img class="img-responsive" src="{{car.car_def_image}}" alt="foto" /><span class="b-goods-feat__label">${{car.car_price|intcomma}}{% if car.car_sub_price %}<span class="b-goods-feat__label_msrp">MSRP ${{car.car_sub_price|intcomma}}</span>{% endif %}</span>
                        </div>
                        {% else %}
                        <div class="b-goods-feat__img">
                            <img class="img-responsive" src="{{car.get_image_url}}" alt="foto" /><span class="b-goods-feat__label">${{car.car_price|intcomma}}{% if car.car_sub_price %}<span class="b-goods-feat__label_msrp">MSRP ${{car.car_sub_price|intcomma}}</span>{% endif %}</span>
                        </div>
                        {% endif %}
                        <ul class="b-goods-feat__desc list-unstyled">
                            <li class="b-goods-feat__desc-item">Model: {{car.car_year}}</li>
                            <li class="b-goods-feat__desc-item">{{car.car_drive_train|truncatechars:11}}</li>
                            <li class="b-goods-feat__desc-item">{{car.car_engine}}</li>
                        </ul>
                        <h3 class="b-goods-feat__name"><a href="{{car.get_absolute_url}}">{{car.title}}</a></h3>
                    </div>
                    {% empty %}
                    No Related Car
                    {% endfor %}
                </div>
                <!-- end .related-carousel-->
            </div>
        </div>
    </div>
</section>
<!-- end .section-default_top-->

</div>
</div>
{% endblock content %}